
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Developer’s manual &#8212; Striptease 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API documentation" href="API.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="developer-s-manual">
<h1>Developer’s manual<a class="headerlink" href="#developer-s-manual" title="Permalink to this headline">¶</a></h1>
<p>This section of the documentation describes how to develop new
features.</p>
<div class="section" id="graphical-user-interfaces-guis">
<h2>Graphical User Interfaces (GUIs)<a class="headerlink" href="#graphical-user-interfaces-guis" title="Permalink to this headline">¶</a></h2>
<p>In this section, we provide a few recipes that show how to implement
features commonly found in GUI programs.</p>
<div class="section" id="creating-new-forms">
<h3>Creating new forms<a class="headerlink" href="#creating-new-forms" title="Permalink to this headline">¶</a></h3>
<p>A <em>form</em> is a window on the screen containing controls, called
<em>widgets</em>. Striptease uses the <a class="reference external" href="https://www.riverbankcomputing.com/software/pyqt/intro">PyQt</a> bindings to
the <a class="reference external" href="https://www.qt.io/">Qt library</a> to show and manipulate forms.</p>
<p>As the visual layout of forms can be extremely complex, Qt provides a
GUI tool to design and test forms, called <a class="reference external" href="https://doc.qt.io/qt-5/qtdesigner-manual.html">Qt Designer</a>. Although Qt
Designer has been developed with C++ programmers in mind, it can be
used to create forms to be used in Python programs too.</p>
<p>Here is a screenshot of Qt Designer:</p>
<div class="figure align-center" id="id1">
<img alt="Qt Designer 5.9 screenshot" src="_images/qtdesigner.png" />
<p class="caption"><span class="caption-text">QT Designer 5.9</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="using-websocket-plots-in-forms">
<h3>Using Websocket plots in forms<a class="headerlink" href="#using-websocket-plots-in-forms" title="Permalink to this headline">¶</a></h3>
<p>A common feature in Striptease programs is to show a real-time plot of
the data read from the electronic boards. Striptease provides a class,
<code class="xref py py-class docutils literal notranslate"><span class="pre">widgets.plot.pol.PolMplCanvas</span></code>, that helps in implementing
this kind of widget. Here we provide an explanation of how to use it
in forms designed with Qt Designer.</p>
<p>Once you have created a new form in Qt Designer, insert a plain
<strong>Widget</strong> control in the form. This form is generic, i.e., it will be
shown as a transparent rectangular surface: Qt Designer has no way to
understand how it will appear once the program is completed.</p>
<p>We must however tell Qt Designer that this widget should be of the
proper type. This is called <em>promotion</em>: select the new transparent
widget and pick the entry «Promote to…» from the contextual menu under
the object inspector, as shown in the following figure.</p>
<div class="figure align-center">
<img alt="Contextual menu to promote a widget in Qt Designer" src="_images/polmplcanvas-01-promote.png" />
</div>
<p>A new window will appear. This window contains all the custom widgets
defined so far in Qt Designer, and it should be empty. Fill the fields
with the following values:</p>
<ul class="simple">
<li><p><strong>Base class name</strong>: leave as it is now (<code class="docutils literal notranslate"><span class="pre">QWidget</span></code>);</p></li>
<li><p><strong>Promoted class name</strong>: enter <code class="docutils literal notranslate"><span class="pre">PolMplCanvas</span></code> (case is important!);</p></li>
<li><p><strong>Header file</strong>: enter <code class="docutils literal notranslate"><span class="pre">widgets.plot.pol.h</span></code>;</p></li>
<li><p><strong>Global include</strong>: leave it blank.</p></li>
</ul>
<p>The header file we have specified is <code class="docutils literal notranslate"><span class="pre">widgets.plot.pol.h</span></code>, which is
simply the Python module containing the definition for
<code class="docutils literal notranslate"><span class="pre">PolMplCanvas</span></code>, with a <code class="docutils literal notranslate"><span class="pre">.h</span></code> appended at the end. The <code class="docutils literal notranslate"><span class="pre">.h</span></code>
extension must be inserted because Qt Designer always thinks that
modules are defined in C++ header files; this extension will be
silently dropped once we load the form in our Python script.</p>
<div class="figure align-center">
<img alt="Specifying how to promote a widget to ``PolMplCanvas`` (1/2)" src="_images/polmplcanvas-02-promoted-widget-1.png" />
</div>
<p>Once you have entered the values listed above, press <em>Add</em>; the new
promotion should be added to the list <em>Promoted classes</em>:</p>
<div class="figure align-center">
<img alt="Specifying how to promote a widget to ``PolMplCanvas`` (2/2)" src="_images/polmplcanvas-03-promoted-widget-2.png" />
</div>
<p>So far we have defined a promotion from a generic widget to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">widgets.plot.pol.PolMplCanvas</span></code>, but we have not asked Qt
Designer to use it on our widget in the main form (see the text «Not
used» under the column <em>Usage</em>?). Just press the button <em>Promote</em> to
promote the widget.</p>
<p>We need only one final touch. From the point of view of Qt Designer,
the widget is no longer a generic <code class="docutils literal notranslate"><span class="pre">QWidget</span></code>, but yet the program
does not know how to plot it. This means that the widget has no size,
and thus the scaling of the form might look weird when opened in Qt
Designer. To fix this, you can set the field <em>minimumSize</em> in the
Property Editor on the left. Setting it to 640×480 is usually fine:</p>
<div class="figure align-center">
<img alt="Specifying the minimum size for a custom widget" src="_images/polmplcanvas-04-minimum-size.png" />
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Striptease</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer’s manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#graphical-user-interfaces-guis">Graphical User Interfaces (GUIs)</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="API.html" title="previous chapter">API documentation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018−2019, LSPE/STRIP team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/development.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>